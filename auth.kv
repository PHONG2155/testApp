#:import MDTextField kivymd.uix.textfield.MDTextField
#:import MDRaisedButton kivymd.uix.button.MDRaisedButton
#:import MDFlatButton kivymd.uix.button.MDFlatButton
#:import MDLabel kivymd.uix.label.MDLabel
#:import MDBoxLayout kivymd.uix.boxlayout.MDBoxLayout

ScreenManager:
    LoginScreen:
        name: "login"
    RegisterScreen:
        name: "register"
    DashboardScreen:
        name: "dashboard"

<LoginScreen>:
    MDFloatLayout:
        MDLabel:
            text: "ĐĂNG NHẬP"
            halign: "center"
            font_style: "H5"
            pos_hint: {"center_x": .5, "center_y": .9}

        MDTextField:
            id: login_username
            hint_text: "Tên đăng nhập"
            icon_right: "account"
            size_hint_x: .8
            pos_hint: {"center_x": .5, "center_y": .7}
            mode: "rectangle"

        MDTextField:
            id: login_password
            hint_text: "Mật khẩu"
            icon_right: "lock"
            password: True
            size_hint_x: .8
            pos_hint: {"center_x": .5, "center_y": .6}
            mode: "rectangle"

        MDRaisedButton:
            text: "Đăng nhập"
            pos_hint: {"center_x": .5, "center_y": .48}
            size_hint_x: .6
            on_release: root.do_login()

        MDFlatButton:
            text: "Chưa có tài khoản? Đăng ký"
            pos_hint: {"center_x": .5, "center_y": .38}
            on_release: root.go_register()

        MDLabel:
            text: "Dữ liệu lưu local bằng SQLite"
            theme_text_color: "Secondary"
            font_size: "12sp"
            halign: "center"
            pos_hint: {"center_x": .5, "center_y": .28}


<RegisterScreen>:
    MDFloatLayout:
        MDLabel:
            text: "ĐĂNG KÝ"
            halign: "center"
            font_style: "H5"
            pos_hint: {"center_x": .5, "center_y": .92}

        MDTextField:
            id: reg_username
            hint_text: "Tên đăng nhập (bắt buộc)"
            icon_right: "account-plus"
            size_hint_x: .8
            pos_hint: {"center_x": .5, "center_y": .78}
            mode: "rectangle"

        MDTextField:
            id: reg_fullname
            hint_text: "Họ và tên (không bắt buộc)"
            icon_right: "account-badge"
            size_hint_x: .8
            pos_hint: {"center_x": .5, "center_y": .68}
            mode: "rectangle"

        MDTextField:
            id: reg_password
            hint_text: "Mật khẩu"
            icon_right: "lock"
            password: True
            size_hint_x: .8
            pos_hint: {"center_x": .5, "center_y": .58}
            mode: "rectangle"

        MDTextField:
            id: reg_confirm
            hint_text: "Nhập lại mật khẩu"
            icon_right: "lock-check"
            password: True
            size_hint_x: .8
            pos_hint: {"center_x": .5, "center_y": .48}
            mode: "rectangle"

        MDRaisedButton:
            text: "Tạo tài khoản"
            pos_hint: {"center_x": .5, "center_y": .36}
            size_hint_x: .6
            on_release: root.do_register()

        MDFlatButton:
            text: "Quay lại đăng nhập"
            pos_hint: {"center_x": .5, "center_y": .28}
            on_release: root.back_login()


<DashboardScreen>:
    MDFloatLayout:
        MDLabel:
            text: root.welcome_text
            halign: "center"
            font_style: "H6"
            pos_hint: {"center_x": .5, "center_y": .6}
            halign: "center"

        MDRaisedButton:
            text: "Đăng xuất"
            pos_hint: {"center_x": .5, "center_y": .4}
            size_hint_x: .5
            on_release: root.logout()
